<!-- <li *ngFor="let obj of arrResult">
    <div>
        <h3> Tool </h3>
        {{obj | json}}
    </div>
</li>
<p>{{ErrMsg}}</p> -->


<div class="border-left-gray border-right-gray ">
    <div class="row" [hidden]="!MainPage">
      <div class="col col-20 mt-4" [hidden]="_hideFilter">
        <app-res-filter (filterEvent)="receiveFilterChange($event)" [helpArr]="resTable.dtResultsObjectsHelp"></app-res-filter>
      </div>
      <div class="col col-80 pl-2 border-left-gray mt-4">
        <div class="row">
        </div>
        <app-results-table #resTable [filterChangedRec]="filterChanged" (hideFilter)="hideFilter($event)" (goToViewEvent)="goToView($event)"></app-results-table>
      </div>
    </div>

    <div class="row" [hidden]="MainPage">
      <div class="container-fluid">              
        <div class="mt-0 ml-0 pl-0 mt-0 pt-2 row">
          <div class="col-10 pl-0 ">
          <nav class="ml-0 pl-0 mt-0 pl-0 pt-0 " aria-label="breadcrumb">
             <ol class="breadcrumb mt-0 ml-0 pl-0 bg-white pb-0 mb-0 " >
                 <li class="breadcrumb-item text-secondary" (click)="switchPage()" ><a href="javascript:void(0)">{{'All' | translate}}</a></li>
                 <li class="breadcrumb-item active text-secondary"  aria-current="page">{{'Result Information' | translate}}</li> 
             </ol>
           </nav> 
          </div>                
        </div>  
        <div class="row">
          <div class="col-6"></div>
          <div class="col-6 float-right text-right pb-2">                       
                <h2 data-toggle="tooltip" title="{{'Download Results' | translate}}" class="siteTitle cursor-pointer ml-4 mb-0"  (click)="DownLoadResults()">
                  <img [src] = "environment.ImagePath+'icon_Download.svg'"  class="icon-edit"   (click)="DownLoadResults()">
                  {{'Download' | translate}}
                  <i class="fa fa-spinner fa-spin" *ngIf="processdownload"></i>
              </h2>                                    
          </div>
      </div>
        <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs navul">
          <li [ngbNavItem]="1" class="navli" id="dataitem1">
            <a ngbNavLink class="siteTitle" >{{'Machining Parameters' | translate}}</a>
            <ng-template ngbNavContent>
              <inner-tabs-table [viewParamsChanged]="viewParams"></inner-tabs-table>
              <machining-prms [viewParamsChangedMP]="viewParams"></machining-prms>
            </ng-template>
          
          </li>

          <li [ngbNavItem]="2" class="navli">
            <a ngbNavLink class="siteTitle">{{'Product Information' | translate}}</a>
            <ng-template ngbNavContent>
              <inner-tabs-table [viewParamsChanged]="viewParams"></inner-tabs-table>
              <product-info [viewParamsChanged]="viewParams" [SRC]="'ITA1'"></product-info>
            </ng-template>
          </li>

          <li [ngbNavItem]="3" class="navli">
            <a ngbNavLink class="siteTitle">{{'2D+3D Representation' | translate}}</a>
            <ng-template ngbNavContent>
              <inner-tabs-table [viewParamsChanged]="viewParams"></inner-tabs-table>
              <product-info [viewParamsChanged]="viewParams" [SRC]="'ITA2'"></product-info>
            </ng-template>
          </li>

          <li [ngbNavItem]="4" [disabled]="true" class="navli">
            <a ngbNavLink class="siteTitle"></a>
            <ng-template ngbNavContent></ng-template>
          </li>

          <li [ngbNavItem]="5" [disabled]="true" class="navli">
            <a ngbNavLink class="siteTitle"></a>
            <ng-template ngbNavContent></ng-template>
          </li>

        </ul>

        <div [ngbNavOutlet]="nav" class="mt-3"></div>
        <!-- <ngb-tabset [destroyOnHide]="false" type="pills" justify="fill">
          
          <ngb-tab title="Machining Parameters">
            <ng-template ngbTabContent>
              <machining-prms></machining-prms>
            </ng-template>
          </ngb-tab>
           
          <ngb-tab>
            <ng-template ngbTabTitle>Product Information</ng-template>
            <ng-template ngbTabContent>
                <product-info [viewParamsChanged]="viewParams" [SRC]="'ITA1'"></product-info>
            </ng-template>
          </ngb-tab>
           
          <ngb-tab>
            <ng-template ngbTabTitle>2D+3D Representation</ng-template>
            <ng-template ngbTabContent>
              <product-info [viewParamsChanged]="viewParams" [SRC]="'ITA2'"></product-info>
            </ng-template>
          </ngb-tab>

          <ngb-tab [disabled]="true"></ngb-tab>
          <ngb-tab [disabled]="true"></ngb-tab>
                     
        </ngb-tabset> -->
        <!-- <div *ngIf="IsExport"  id="pdfdata" style="visibility :hidden"> -->
                      
    </div>    
  </div> 
  
  <div *ngIf="IsExport"  id="pdfdata" style="visibility:hidden;position:absolute;top:-5000px"> 
        <div class="row pb-2 ml-2 pr-0 mr-0 pb-3">
          <div class="col-2 pt-4">
            <img [src]="environment.ImagePath+'ISCAR_Logo.png'" class="logoImg">
          </div>
          <div class="col-8 text-center pt-4">
            <label class="siteTitle PDFDescription pt-2">{{'ITA Recommendation' | translate}}</label>
          </div>
          <div class="col-2 pt-4">            
          </div>
        </div>  
      <div class="pt-3" [ngClass]="srv_statemanage.SelectedMachine.MachineType=='Multi task' || srv_statemanage.SelectedMachine.MachineType=='Multi spindle' || srv_statemanage.SelectedMachine.MachineType=='Swiss type' ?'div-machineitem2':  'div-machineitem1' ">   
        <div  class="PDFTitlediv row pb-2 ml-2 pr-0 mr-0 pt-4">
          <label class="PDFTitle ml-2">{{'Machine' | translate}}</label>
        </div>
        <div class="pt-2" >
          <app-machineitem [exportPDF]="true" [pr_MachineID]="srv_statemanage.SelectedMachine.MachineID"  [pr_MachineName]="srv_statemanage.SelectedMachine.MachineName"></app-machineitem>
        </div> 
      </div>
        
      <div class="pb-2 div-material" >
          <div class="PDFTitlediv row pb-2 ml-2 pr-0 mr-0">
            <label class="PDFTitle ml-2">{{'Material' | translate}}</label>
          </div>
          <div>
            <label class="pt-2">{{mat_desc}}</label>
          </div>
      </div>
        
        <div class="PDFTitlediv row pb-2 ml-2 pr-0 mr-0">
          <label class="PDFTitle ml-2">{{'Operation Data' | translate}}</label>
        </div>
              
        <div class="form-group">
          <div class="row">
            <div class="pr-2 pl-2 pt-2">
              <label class="siteTitle">{{srv_statemanage.MainAppSelected.MenuName | translate}}</label>
            </div>
            <div class="pt-2">
              <label class="siteTitle">{{srv_statemanage.SecAppSelected.MenuName | translate}}</label>
            </div>
          </div> 
          <div  style="min-height:500px">       
              <app-appdetails59  [events]="eventsSubject.asObservable()" *ngIf = "(srv_statemanage.SecApp=='760'||srv_statemanage.SecApp=='770'||srv_statemanage.SecApp=='57')"></app-appdetails59>
              <app-appdetails780  [events]="eventsSubject.asObservable()" *ngIf = "srv_statemanage.SecApp=='780'"  ></app-appdetails780>
              <app-appdetails790  [events]="eventsSubject.asObservable()" *ngIf = "srv_statemanage.SecApp=='790'"  ></app-appdetails790>
              <app-appdetails77  [events]="eventsSubject.asObservable()" *ngIf = "srv_statemanage.SecApp=='77'"  ></app-appdetails77>
              <appdetails120  [events]="eventsSubject.asObservable()" *ngIf = "(srv_statemanage.SecApp=='120' || srv_statemanage.SecApp=='119')" ></appdetails120> 
              <appdetails990  [events]="eventsSubject.asObservable()" *ngIf = "(srv_statemanage.SecApp=='990' || srv_statemanage.SecApp=='980' || srv_statemanage.SecApp=='970' || srv_statemanage.SecApp=='960')" ></appdetails990>   
              <appdetails890  [events]="eventsSubject.asObservable()" *ngIf = "(srv_statemanage.SecApp=='890' || srv_statemanage.SecApp=='880' || srv_statemanage.SecApp=='870' || srv_statemanage.SecApp=='860' || srv_statemanage.SecApp=='850')" ></appdetails890>                 
              <appdetails52   [events]="eventsSubject.asObservable()" *ngIf = "(srv_statemanage.SecApp=='52' || srv_statemanage.SecApp=='53' || srv_statemanage.SecApp=='50')" ></appdetails52>   
              <appdetails1   [events]="eventsSubject.asObservable()" *ngIf = "srv_statemanage.SecApp=='1'"></appdetails1> 
              <appdetails51  [events]="eventsSubject.asObservable()" *ngIf = "srv_statemanage.SecApp=='51'" ></appdetails51>               
              <appdetails54  [events]="eventsSubject.asObservable()" *ngIf = "(srv_statemanage.SecApp=='54' || srv_statemanage.SecApp=='10'  || srv_statemanage.SecApp=='188')"></appdetails54>                    
          </div> 
        </div>    
        <div class="PDFTitlediv row pt-4 pb-2 ml-2 pr-0 mr-0">
          <label class="PDFTitle ml-2">{{'Results' | translate}}</label>
        </div>
        <div class="pt-2  pl-3">
           <inner-tabs-table [viewParamsChanged]="viewParams"></inner-tabs-table>
        </div>
        <div class="PDFTitlediv row pt-2 pb-2 ml-2 pr-0 mr-0  pl-3">
          <label class="PDFTitle ml-2">{{'Machining Parameters' | translate}}</label>
        </div>
        <div class="pt-2" >
          <machining-prms [exportPDF]="true"  [viewParamsChangedMP]="viewParams"></machining-prms> 
        </div> 
        <div class="PDFTitlediv row pt-4 pb-2 ml-2 pr-0 mr-0  pl-3">
          <label class="PDFTitle ml-2">{{'Product Information' | translate}}</label>
        </div>
        <div class="pt-2">
          <div *ngFor="let row of viewParams.Res[0]?.CatalogNo; let PrtNum = index"  [hidden]="row.trim().length != 7">        
            <label class="siteTitle font-weight-bold pt-2 pl-3">{{viewParams.Res[0].GroupText[PrtNum] | translate}}:</label>          
            <div class="pl-3 pt-2">        
              <result-item-info [viewParamsChanged]="viewParams" [ItemDesignation]="viewParams.Res[0].Designation[PrtNum]" [Family]="viewParams.Res[0].Families[PrtNum]" [CatalogNo]="viewParams.Res[0].CatalogNo[PrtNum]"></result-item-info>
            </div>                      
          </div>
      </div>                          
  </div>

  <ngx-spinner  bdColor="rgba(0, 0, 0, 0.08)"  
  bdOpacity ="0.05"
  size="medium"
  color="#676767"
  type="ball-circus">    
  <p style="color:#676767">{{'Please wait while ITA is processing your request.' | translate}} </p> 
  </ngx-spinner>  
